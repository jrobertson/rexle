<tests>
  <summary/>
  <records>
    <test>
      <summary>
        <path>1</path>
        <type>value only</type>
        <description>return the element which matches @colour="red"</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>trust[@colour='red']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>2</path>
        <type>value and attribute</type>
        <description>return the element value and attributes</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust colour='blue'>fff</trust><trust colour='purple'>ggg</trust></a>
              ]]>
            </xml>
            <xpath>trust[@colour='red']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
            <attributes>{"colour"=>"red"}</attributes>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>3</path>
        <type>multiple values</type>
        <description>multiple elements returned which match @colour="red"</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust colour='blue'>fff</trust><trust colour='red'>ggg</trust></a>
              ]]>
            </xml>
            <xpath>trust[@colour='red']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,ggg</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>4</path>
        <type>value only</type>
        <description>single element returned</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust>abc</trust><ccc>rrr</ccc></a>
              ]]>
            </xml>
            <xpath>trust</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>5</path>
        <type>value only</type>
        <description>nested elements</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust>abc</trust><ccc><eee>fff</eee></ccc></a>
              ]]>
            </xml>
            <xpath>ccc/eee</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>fff</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>6</path>
        <type>multiple values</type>
        <description>multiple elements returned</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust>abc</trust><trust>ee3</trust><ccc>rrr</ccc></a>
              ]]>
            </xml>
            <xpath>trust</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,ee3</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>7</path>
        <type>multiple values</type>
        <description>multiple elements returned</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>//trust</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,fff</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>    
        <path>8</path>
        <type>function only</type>
        <description>count()</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>count(trust)</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>2</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>9</path>
        <type>function</type>
        <description>attribute::id</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a id='fuzz'>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>attribute::id</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>fuzz</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>10</path>
        <type>value only</type>
        <description>element selection by index</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a id='fuzz'>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>trust[1]</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>11</path>
        <type>value only</type>
        <description>select 1 descendent which matches //trust[@colour="red"]</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>//trust[@colour='red']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>12</path>
        <type>multiple values</type>
        <description>select 2 mixed descendents which match //trust[@colour="red"]</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff<e><trust colour='red'>rrr</trust></e></trust></a>
              ]]>
            </xml>
            <xpath>//trust[@colour='red']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,rrr</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>13</path>
        <type>string only</type>
        <description>select the text value from an XPath 2 elements deep</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a id='fuzz'>ddd<summary><a>fff<a/></summary></a>
              ]]>
            </xml>
            <xpath>summary/a/text()</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>fff</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>14</path>
        <type>value only</type>
        <description>mixed xpath: descendant and index</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust>abc</trust><ccc><eee>fff</eee><eee>ggg</eee></ccc></a>
              ]]>
            </xml>
            <xpath>ccc/eee[2]</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>ggg</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>15</path>
        <type>multiple strings</type>
        <description>multiple descendant elements returned from text()</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust>abc</trust><trust>ee3</trust><ccc>rrr</ccc></a></root>
              ]]>
            </xml>
            <xpath>a/trust/text()</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,ee3</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>16</path>
        <type>string only</type>
        <description>a wildcard followed by a single element attribute</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust></a></root>
              ]]>
            </xml>
            <xpath>a/*/attribute::id</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>45</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>17</path>
        <type>multiple strings</type>
        <description>a wildcard followed by a pair of element attributes</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust><ccc id='66'>rrr</ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*/attribute::id</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>45,66</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>18</path>
        <type>string only</type>
        <description>a wildcard followed by a single element attribute</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust><ccc>rrr</ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*/attribute::id</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>45</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>19</path>
        <type>value only</type>
        <description>select 1 descendent which matches //trust[@colour="red"]</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<a>ddd<trust colour='red'>abc</trust><trust>fff</trust></a>
              ]]>
            </xml>
            <xpath>a/trust[@id='45']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>20</path>
        <type>value only</type>
        <description>descendant with wildcard and predicate</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust><ccc>rrr</ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[@id='45']</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>21</path>
        <type>multiple values</type>
        <description>descendant with wildcard</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust><ccc>rrr</ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,rrr</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>22</path>
        <type>multiple values</type>
        <description>descendant with wildcard and no 2nd element value</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust><ccc></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>abc,</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>23</path>
        <type>value only</type>
        <description>descendant 3 levels deep</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/trust/b</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>4444</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>24</path>
        <type>value only</type>
        <description>descendant 3 levels deep with wildcard and predicate</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[colour='red']/b</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>4444</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>25</path>
        <type>value only</type>
        <description>descendant with wildcard and predicate followed by another wildcard</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[colour='red']/*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>4444</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>26</path>
        <type>multiple values</type>
        <description>2 wildcard descendants from different branches with the same predicate followed by another wildcard</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc colour='red'><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[colour='red']/*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>4444,tttt</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>27</path>
        <type>string only</type>
        <description>mixed descdentant wildcards with text()</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[colour='red']/*/text()</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <value>4444</value>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>28</path>
        <type>name only</type>
        <description>descendant with wildcard and index predicate</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45' colour='red'>abc<b>4444</b></trust><ccc><d>tttt</d></ccc></a></root>
              ]]>
            </xml>
            <xpath>a/*[2]</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <name>ccc</name>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>29</path>
        <type>name only</type>
        <description>single wildcard</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust></a></root>
              ]]>
            </xml>
            <xpath>*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <name>a</name>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>30</path>
        <type>multiple names</type>
        <description>wildcard with 2 elements returned</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust></a><f>yyy</f></root>
              ]]>
            </xml>
            <xpath>*</xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <names>a,f</names>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>31</path>
        <type>nested xpath</type>
        <description>nested XPath enumeration</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<root>ddd<a><trust id='45'>abc</trust></a><f><b>yyy</b></f><g><b>t4t4</b></g></root>
              ]]>
            </xml>
            <xpath>*</xpath>
            <inner_xpath>b</inner_xpath>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <names>yyy,t4t4</names>
          </summary>
        </io>
      </records>
    </test>
    <test>
      <summary>
        <path>32</path>
        <type>XML validation</type>
        <description>validate typical XML</description>
      </summary>
      <records>
        <io>
          <summary>
            <type>input</type>
            <xml>
              <![CDATA[
<urls><summary><recordx_type>dynarex</recordx_type><format_mask>[!short_url] [!full_url]</format_mask><schema>urls/url(short_url,full_url)</schema></summary><records><url created="2010-10-11 21:11:16 +0100" id="2" last_modified="2010-10-13 15:20:58 +0100"><short_url>aa</short_url><full_url>http://www.wired.com/</full_url></url></records></urls>
              ]]>
            </xml>
          </summary>
        </io>
        <io>
          <summary>
            <type>output</type>
            <xml>
              <![CDATA[
<urls><summary><recordx_type></recordx_type><format_mask></format_mask><schema></schema></summary><records><url created='2010-10-11 21:11:16 +0100' id='2' last_modified='2010-10-13 15:20:58 +0100'><short_url></short_url><full_url></full_url></url></records></urls>
              ]]>
            </xml>
          </summary>
        </io>
      </records>
    </test>
  </records>
</tests>
